<!DOCTYPE html>
<html lang="ko">
<head>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5522499110435321" crossorigin="anonymous"></script>
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>테스트잇 풍향고2 여행 성격 테스트</title>
    <meta name="description" content="테스트잇 풍향고2 여행 성격 테스트">
    <meta name="keywords" content="테스트잇,성격테스트,연애타입,테스트잇풍향고2,풍향고2여행성격,풍향고2성격,풍향고2여행테스트,풍향고2여행성격테스트,연애능력테스트,연애테스트,연애mbti,연애성격테스트, 심리테스트, mbti테스트">
    <meta property="og:type" content="website">
    <meta property="og:title" content="테스트잇 풍향고2 여행 성격 테스트">
    <meta property="og:description" content="테스트잇 풍향고2 여행 성격 테스트">
    <meta property="og:image" content="img_main360.png">
    <meta property="og:url" content="https://test-it.co.kr/test360">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, #dceeff 0%, #fdeef5 100%);
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .page-header {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 2;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .logo {
            width: 100px;
            display: block; 
        }

        .main-nav {
            display: flex;
            font-size: 1.1rem;
            text-transform: uppercase;
            list-style: none;
            padding-left: 0;
            margin: 0;
            font-weight: 700;
        }

        .main-nav li {
            margin-left: 20px;
            line-height: 1.7;
        }

        .main-nav a {
            color: #555;
            text-decoration: none;
            transition: color 0.3s;
        }

        .main-nav a:hover {
            color: #ff9a9e;
        }

        #img_main {
            width: 500px;
            max-width: 100%;
            height: auto;
            margin: 0 auto;
            border-radius: 15px;
        }

        #start-container, #question-container, #result-container {
            text-align: center;
            background-color: #fff;
            padding: 20px 20px 40px 20px; 
            border-radius: 25px;
            max-width: 600px;
            width: 90%;
            margin-top: 30px;
            margin-bottom: 50px;
            box-shadow: 0 10px 30px rgba(166, 193, 238, 0.4);
        }

        .progress-bar-container {
            width: 100%;
            background-color: #eee;
            border-radius: 20px;
            height: 12px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #89f7fe, #89f7fe);
            transition: width 0.3s ease;
        }

        button {
            background: linear-gradient(90deg, #ffaedb 0%, #ffaedb 50%, #ffaedb 100%);
            background-size: 200% auto;
            color: #222222;
            font-weight: 700;
            width: 100%;
            max-width: 450px;
            padding: 18px 10px;
            font-size: 1.2rem;
            font-family: 'Noto Sans KR', sans-serif;
            letter-spacing: 0px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin: 8px auto; 
            display: block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: 0.4s;
        }

        button:hover {
            background-position: right center;
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 8px 20px rgba(102, 166, 255, 0.3);
        }

        button:active {
            transform: scale(0.98);
        }
        
        #options {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .result-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-top: 10px;
        }
        
        .result-buttons button {
            margin: 8px auto;
        }

        #result-image {
            max-width: 100%;
            height: auto;
            margin-top: 0px; 
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        #question-image {
            width: 100%;
            max-width: 100%;
            height: auto;
            margin: 0 auto 20px auto; 
            border-radius: 15px;
            display: block;
        }
        
        h2#question {
            display: none; 
        }

        .coupang_ad {
            width: 320px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .page-header {
                flex-direction: row; 
                padding: 10px 15px;
            }

            .logo {
                width: 90px;
                margin: 0;
            }

            .main-nav {
                display: flex;
                flex-direction: row;
                justify-content: flex-end;
                width: auto;
                margin: 0;
                font-size: 0.85rem;
            }

            .main-nav li {
                margin-left: 10px;
                margin-right: 0;
            }

            button {
                font-size: 1.0rem;
                padding: 16px 5px;
            }
            
            #start-container, #question-container, #result-container {
                padding: 20px 15px 30px 15px;
            }
        }
    </style>
</head>
<body>

    <header class="page-header wrapper">
        <h1><a href="index.html"><img class="logo" src="img_logo.png" alt="test it"></a></h1>
        <nav>
            <ul class="main-nav">
                <li><a href="https://test-it.co.kr/test.html">성격</a></li>
                <li><a href="https://test-it.co.kr/face.html">얼굴</a></li>
                <li><a href="https://test-it.co.kr/etc.html">그외</a></li>
                <li><a href="https://test-it.co.kr/saju.html">사주</a></li>
            </ul>
        </nav>
    </header>

    <div id="start-container">
        <img id="img_main" class="mt-3" src="img_main360.png" alt="Main Image">
        <button onclick="startTest()">테스트 시작하기</button>
    </div>

    <div id="question-container" style="display: none;">
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <h2 id="question"></h2>
        <img id="question-image" src="" alt="Question Image">
        <div id="options"></div>
    </div>

    <div id="result-container" style="display: none;">
        <p id="result"></p>
        <img id="result-image" src="" alt="Result Image">

        <div class="result-buttons">
            <button type="button" onclick="saveResultImage()">결과 이미지 저장하기</button>
            
            <button type="button" onclick="location.href='test360.html'">다시 해보기</button>
            <button type="button" onclick="location.href='/'">다른 테스트 해보기</button>
            
            <button type="button" onclick="shareTest()">테스트 공유하기</button>
        </div>
    </div>

    <article class="coupang_ad mt-1">
        <script src="https://ads-partners.coupang.com/g.js"></script>
        <script>
            new PartnersCoupang.G({"id":798186,"template":"carousel","trackingCode":"AF4391881","width":"350","height":"140","tsource":""});
        </script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5522499110435321" crossorigin="anonymous"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-5522499110435321"
             data-ad-slot="5388282419"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </article>

    <script>
        const questions = [
            {
                image: 'image1_q360.png',
                options: [
                    { text: '마냥 설렌다', value: '1' },
                    { text: '걱정이 태산이다', value: '2' },
                    { text: '모르고 가서 더 즐겁다', value: '3' },
                    { text: '가서 부딪히면 되니까 별생각 없다', value: '4' }
                ]
            },
            {
                image: 'image2_q360.png',
                options: [
                    { text: '크리스마스 감성에 취한다', value: '1' },
                    { text: '일단 여기저기 길을 물어본다', value: '2' },
                    { text: '지도를 보며 길을 찾는다', value: '3' },
                    { text: '추워서 따뜻한 커피가 먹고 싶다', value: '4' }
                ]
            },
            {
                image: 'image3_q360.png',
                options: [
                    { text: '먼저 나서서 숙소를 잡으려 한다', value: '2' },
                    { text: '친구를 따라가서 도와준다', value: '1' },
                    { text: '친구가 같이 가자고 하면 그때 간다', value: '3' },
                    { text: '일단 실내에 들어가서 생각하고 싶다', value: '4' }
                ]
            },
            {
                image: 'image4_q360.png',
                options: [
                    { text: '친구와 수다 떨며 걸어 다닌다', value: '1' },
                    { text: '먼저 앞장서서 구경하며 다닌다', value: '2' },
                    { text: '친구들이 잘 오는지 체크한다', value: '3' },
                    { text: '여기저기 사진 찍느라 바쁘다', value: '4' }
                ]
            },
            {
                image: 'image5_q360.png',
                options: [
                    { text: '고딕 양식으로 지어졌구나', value: '1' },
                    { text: '만든다고 엄청 고생했겠네', value: '2' },
                    { text: '그시대에 저걸 어떻게 만들었을까?', value: '3' },
                    { text: '그런 건 모르겠고 사진 찍느라 바쁨', value: '4' }
                ]
            },
            {
                image: 'image6_q360.png',
                options: [
                    { text: '동영상 위주로 찍는다', value: '1' },
                    { text: '사진 위주로 찍는다', value: '2' },
                    { text: '찍다가 안 담겨서 눈으로 본다', value: '3' },
                    { text: '셀카 위주로 찍는다', value: '4' }
                ]
            },
            {
                image: 'image7_q360.png',
                options: [
                    { text: '무슨 이유가 있겠지 생각한다', value: '1' },
                    { text: '누군가 나서서 뭐라 해야 하지 않아?', value: '2' },
                    { text: '조용히 지켜본다', value: '3' },
                    { text: '이러다 못 먹는 거 아닌지 걱정한다', value: '4' }
                ]
            },
            {
                image: 'image8_q360.png',
                options: [
                    { text: '억울해서 눈물 날 것 같다', value: '1' },
                    { text: '진작 얘기해 주지 어이가 없다', value: '2' },
                    { text: '너무 열받는다', value: '3' },
                    { text: '다른데 아무 데나 가자고 한다', value: '4' }
                ]
            },
            {
                image: 'image9_q360.png',
                options: [
                    { text: '작품을 보며 나만의 해석을 해본다', value: '1' },
                    { text: '구경 다니며 작품 설명을 꼼꼼히 읽는다', value: '2' },
                    { text: '실제로 여기 살았던 사람들을 떠올린다', value: '3' },
                    { text: '멋진 궁전 내부와 함께 셀카를 계속 찍는다', value: '4' }
                ]
            },
            {
                image: 'image10_q360.png',
                options: [
                    { text: '친구들의 의견을 물어보며 산다', value: '1' },
                    { text: '필요한 것만 간단히 산다', value: '2' },
                    { text: '친구들이 사고 싶어 하는 거 위주로 산다', value: '3' },
                    { text: '내가 먹고 싶은걸 일단 담는다', value: '4' }
                ]
            }
        ];

        const tieBreaker = {
            image: 'tie_question_image360.png',
            options: [
                { text: '멋진 옷 입고 거리 거닐기', value: '1' },
                { text: '현지 공연, 미술관, 박물관 가보기', value: '2' },
                { text: '야외 테라스에서 커피 한잔하기', value: '3' },
                { text: '맛있는 밥 한 끼 제대로 먹기', value: '4' }
            ]
        };

        let currentQuestionIndex = 0;
        const userAnswers = [];
        let tieScores = [];

        function startTest() {
            document.getElementById('start-container').style.display = 'none';
            document.getElementById('question-container').style.display = 'block';
            showQuestion();
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function showQuestion() {
            updateProgressBar(); 

            const currentQuestion = questions[currentQuestionIndex];
            document.getElementById('question').textContent = ''; 
            document.getElementById('question-image').src = currentQuestion.image;
            const optionsElement = document.getElementById('options');
            optionsElement.innerHTML = '';

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.onclick = () => selectAnswer(option.value);
                optionsElement.appendChild(button);
            });
        }

        function selectAnswer(option) {
            userAnswers.push(option);
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                processResult();
            }
        }

        function processResult() {
            const resultCounts = userAnswers.reduce((counts, answer) => {
                counts[answer] = (counts[answer] || 0) + 1;
                return counts;
            }, {});

            const maxCount = Math.max(...Object.values(resultCounts));
            const topResults = Object.keys(resultCounts).filter(key => resultCounts[key] === maxCount);

            if (topResults.length > 1) {
                tieScores = topResults;
                askTieBreaker();
            } else {
                showResult(topResults[0]);
            }
        }

        function askTieBreaker() {
            document.getElementById('question-container').style.display = 'block';
            document.getElementById('progressBar').style.width = '100%';

            const questionElement = document.getElementById('question');
            questionElement.textContent = ''; 
            const questionImageElement = document.getElementById('question-image');
            questionImageElement.style.display = 'block'; 
            questionImageElement.src = tieBreaker.image;

            const optionsElement = document.getElementById('options');
            optionsElement.innerHTML = '';

            tieBreaker.options.forEach(option => {
                if (tieScores.includes(option.value)) {
                    const button = document.createElement('button');
                    button.textContent = option.text;
                    button.onclick = () => resolveTie(option.value);
                    optionsElement.appendChild(button);
                }
            });
        }

        function resolveTie(selectedOption) {
            showResult(selectedOption);
        }

        function showResult(result) {
            document.getElementById('question-container').style.display = 'none';
            document.getElementById('result-container').style.display = 'block';
            document.getElementById('result').textContent = ''; 
            document.getElementById('result-image').src = `result360_image_${result}.png`;
        }

        function saveResultImage() {
            const resultElement = document.getElementById('result-image');
            
            html2canvas(resultElement).then(canvas => {
                const link = document.createElement('a');
                document.body.appendChild(link);
                link.href = canvas.toDataURL("image/png");
                link.download = 'testit_result360.png';
                link.click();
                document.body.removeChild(link);
            }).catch(err => {
                console.error("이미지 저장 실패:", err);
                alert("이미지 저장에 실패했습니다. 캡처를 이용해주세요.");
            });
        }

        // [수정됨] 공유하기 기능 구현 (HTML의 onclick="shareTest()"와 연결)
        function shareTest() {
            const testURL = "https://test-it.co.kr/test360";
            const shareText = "테스트잇 풍향고2 여행 성격 테스트";

            if (navigator.share) {
                // 모바일/최신 브라우저 공유 기능
                navigator.share({
                    title: "테스트잇 풍향고2 여행 성격 테스트",
                    text: shareText,
                    url: testURL
                }).then(() => {
                    console.log("공유 성공");
                }).catch((error) => {
                    console.error("공유 실패:", error);
                });
            } else {
                // PC 등 공유 기능 미지원 시 클립보드 복사
                const tempInput = document.createElement("input");
                document.body.appendChild(tempInput);
                tempInput.value = testURL;
                tempInput.select();
                document.execCommand("copy");
                document.body.removeChild(tempInput);
                alert("링크가 복사되었습니다!");
            }
        }
    </script>
</body>
</html>