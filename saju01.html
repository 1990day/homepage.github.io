

<!DOCTYPE html>
<html lang="ko">
<head>

     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5522499110435321"
     crossorigin="anonymous"></script>
     <meta http-equiv="Content-Security-Policy" content="
     default-src 'self' https://*;
     script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*;
     style-src 'self' 'unsafe-inline' https://*;
     img-src 'self' data: https://*;
     connect-src 'self' https://*;
     frame-src 'self' https://*;
     ">
     <script src="https://nsp.pay.naver.com/sdk/js/naverpay.min.js"></script>

     <script src="https://js.tosspayments.com/v2/standard"></script>









    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>í…ŒìŠ¤íŠ¸ì‡ ì •í†µ ì‚¬ì£¼ ë¦¬í¬íŠ¸</title>
    <meta name="description" content="í…ŒìŠ¤íŠ¸ì‡ ì •í†µ ì‚¬ì£¼ ë¦¬í¬íŠ¸">
<meta name="keywords" content="í…ŒìŠ¤íŠ¸ì‡,ì „ì²´ì‚¬ì£¼,ì •í†µì‚¬ì£¼,í…ŒìŠ¤íŠ¸ì‡ì‚¬ì£¼,í…ŒìŠ¤íŠ¸ì‡ì „ì²´ì‚¬ì£¼,í…ŒìŠ¤íŠ¸ì‡ì‚¬ì£¼,ì •í™•í•œì‚¬ì£¼,ì—°ì• í…ŒìŠ¤íŠ¸,ì—°ì• mbti,ì—°ì• ì„±ê²©í…ŒìŠ¤íŠ¸, ì‹¬ë¦¬í…ŒìŠ¤íŠ¸, mbtií…ŒìŠ¤íŠ¸">
    <meta property="og:type" content="website"> 
    <meta property="og:title" content="í…ŒìŠ¤íŠ¸ì‡ ì •í†µ ì‚¬ì£¼ ë¦¬í¬íŠ¸">
    <meta property="og:description" content="í…ŒìŠ¤íŠ¸ì‡ ì •í†µ ì‚¬ì£¼ ë¦¬í¬íŠ¸">
    <meta property="og:image" content="saju_main01.png">
    <meta property="og:url" content="https://test-it.co.kr/saju01">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
      <link rel="icon" type="image/png" href="favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">




<style>

/* start íƒœê·¸ì™€ question íƒœê·¸ ëª¨ë‘ article íƒœê·¸ë¼ì„œ article íƒœê·¸ì— ì†ì„±ì„ ì£¼ë©´ ë™ì‹œì— ì ìš©ë¨
.start{
    display: flex;
    flex-direction: column;
}
*/
    
   @font-face {
    font-family: 'ChosunGu';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@1.0/ChosunGu.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}
    
      body {
            font-family: 'ChosunGu', sans-serif;
        }
    
.logo {
    width: 100px;
    margin-top: 14px;
}

.main-nav {
    display: flex;
    font-size: 1.25rem;
    text-transform: uppercase;
    margin-top: 34px;
    list-style: none;
}

.main-nav li {
    margin-left: 36px;
       font-family: 'Do Hyeon', sans-serif;
    line-height: 1.7;
    color: #432;
}

.main-nav a{
    color: #432;
       font-family: 'Do Hyeon', sans-serif;
    line-height: 1.7;
}

.main-nav a:hover {
    color: #0bd;
}


.page-header {
    display: flex;
    justify-content: space-between;
}

    
article{
    display: flex;
    flex-direction: column;
}

 
    
#img{
    width: 500px;
    height: 900px;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

#img_main{
    width: 500px;
    height: 600px;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}


.custom-jelly-button {
    width: 100%;
    max-width: 350px;
    height: 60px;
    font-size: 15px !important;
    font-weight: bold;
    color: black !important;
    background: linear-gradient(145deg, #ffcfcf, #ffcfcf); /* ë¶„í™ê³¼ ë…¸ë‘ ê·¸ë¼ë°ì´ì…˜ */
    border: none;
    border-radius: 17px;
    box-shadow: inset -4px -4px 10px rgba(255, 255, 255, 0.7), 
                inset 4px 4px 10px rgba(0, 0, 0, 0.1),
                2px 2px 8px rgba(0, 0, 0, 0.15);
    margin: 0 auto;
    display: block;
}

.custom-jelly-button:hover {
    background: linear-gradient(145deg, #ffcfcf, #ffcfcf); /* ë°˜ëŒ€ë¡œ ê·¸ë¼ë°ì´ì…˜ */
}


/* í˜ì´ì§€ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  /* í˜ì´ì§€ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  .page {
      display: none;
      margin: 0 auto;
      max-width: 600px;
      padding: 20px;
      background-color: #fff;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .page.active {
      display: block;
    }

    /* ì •ë³´ ì…ë ¥ í˜ì´ì§€ ì „ì²´ ìŠ¤íƒ€ì¼ */
    .info-page {
      text-align: center;
    }

    /* "ì‚¬ì£¼ ì •ë³´ ì…ë ¥" ì œëª© ìŠ¤íƒ€ì¼ (í¬ê¸°ëŠ” ì‚´ì§ ì‘ê²Œ, êµµê²Œ) */
    .info-title {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px; /* ì œëª© ì•„ë˜ ê°„ê²© */
    }

    /* í¼ ì „ì²´ ìŠ¤íƒ€ì¼: ì„¸ë¡œ ë ˆì´ì•„ì›ƒ + ì¤‘ì•™ ì •ë ¬ + ìš”ì†Œ ê°„ê²© */
    .saju-form {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px; /* í¼ ë‚´ë¶€ ìš”ì†Œ ê°„ê²©(ì¤„ì„) */
      margin: 0 auto;
      max-width: 400px; /* í¼ ìì²´ í­ ì œí•œ */
    }

    /* ê° ì…ë ¥ ê·¸ë£¹(ì´ë¦„, ì„±ë³„, ìƒë…„ì›”ì¼, íƒœì–´ë‚œ ì‹œê°„, ì´ë©”ì¼) ê³µí†µ ìŠ¤íƒ€ì¼ */
    .form-group {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 3px; /* ë ˆì´ë¸”ê³¼ ì…ë ¥ì°½ ì‚¬ì´ ê°„ê²©(ë” ì¤„ì„) */
    }

    /* ë ˆì´ë¸” êµµê²Œ */
    .label-bold {
      font-weight: bold;
    }

    /* ë‹¨ì¼ input, select ê³µí†µ ìŠ¤íƒ€ì¼ (ë„ˆë¹„ 100%) */
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }

    /* ìƒë…„ì›”ì¼(ì–‘ë ¥/ìŒë ¥ + ì—°/ì›”/ì¼)ì„ í•œ ì¤„ë¡œ ë°°ì¹˜í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì»¨í…Œì´ë„ˆ */
    .form-group-inline {
      display: flex;
      flex-direction: row;
      gap: 8px; /* ë“œë¡­ë‹¤ìš´ ì‚¬ì´ ê°„ê²© */
      width: 100%;
    }

    /* ì´ ì»¨í…Œì´ë„ˆ ì•ˆì˜ selectë“¤ì„ ë™ì¼í•œ ë¹„ìœ¨ë¡œ ëŠ˜ë ¤ ê°™ì€ í­ì„ ë§ì¶¤ */
    .form-group-inline select {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }

    /* ë²„íŠ¼ ì˜ì—­(ê²°ì œí•˜ê¸°/ëŒì•„ê°€ê¸°) */
    .button-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      width: 100%;
      max-width: 500px;
    }

/* ê²°ì œ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
.payment-page {
  text-align: center; /* í˜ì´ì§€ ì „ì²´ ì¤‘ì•™ ì •ë ¬ */
}

/* ê²°ì œ ì§„í–‰ ë©”ì¸ ì œëª© */
.payment-page h1 {
  font-size: 1.2rem;  /* ê¸€ì”¨ í¬ê¸° ì¡°ê¸ˆ ì¤„ì„ */
  font-weight: bold;
  margin-bottom: 10px; /* ì•„ë˜ìª½ ì—¬ë°± */
}

/* "ì…ë ¥ ì •ë³´ í™•ì¸" ë“± í•˜ìœ„ ì œëª© */
.payment-page h2 {
  font-size: 1rem;    /* ë” ì‘ê²Œ */
  font-weight: bold;
  margin-bottom: 8px;
}

/* ì¼ë°˜ í…ìŠ¤íŠ¸(ì´ë¦„, ìƒë…„ì›”ì¼, íƒœì–´ë‚œ ì‹œê°„, ì´ë©”ì¼ ë“±) */
.payment-page p {
  font-size: 0.9rem;  /* ì¼ë°˜ í…ìŠ¤íŠ¸ í¬ê¸° */
  margin-bottom: 5px;
}

    
    .at-share-btn-elements{
        text-align: center;
    }
.share{
    margin: 0 auto;
}

.coupang_ad {
    width: 320px;
    margin: 0 auto;
}
        .custom-button {
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
        }
    
        input, select, button {
      width: 80%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ddd;
    }
    
    
</style>





</head>
<!-- body íƒœê·¸ style background-color ì§€ì •ìœ¼ë¡œ ë°°ê²½ìƒ‰ ë³€ê²½-->
<body class="container" style="background-color:#ffffff">
            
    <header class="page-header wrapper">
        <h1><a href="index.html"><img class="logo" src="img_logo.png" alt="test it"></a>
        </h1>
    <nav>
        <u1 class="main-nav">
            <li> <a href="https://test-it.co.kr/test.html">ì„±ê²©</a></li>
            <li> <a href="https://test-it.co.kr/face.html">ì–¼êµ´</a></li>
            <li> <a href="https://test-it.co.kr/etc.html">ê·¸ì™¸</a></li>
            <li> <a href="https://test-it.co.kr/saju.html">ì‚¬ì£¼</a></li>
        </u1>
    </nav>
        
        
    </header>

  <!-- 1. ì‚¬ì£¼ ë©”ì¸ í˜ì´ì§€ -->
  <div id="mainPage" class="page active">
    <img src="saju_main01.png" alt="ì‚¬ì£¼ ì˜ˆì‹œ" style="width: 100%; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
    <br><br>
    <button class="custom-jelly-button" onclick="showPage('infoPage')">ğŸ’Œ ì •ë³´ ì…ë ¥í•˜ê³  ê²°ì œí•˜ê¸°</button>
</div>

  <!-- ì •ë³´ ì…ë ¥ í˜ì´ì§€ -->
  <div id="infoPage" class="page info-page">
    <h1 class="info-title">ğŸ“„ ì‚¬ì£¼ ì •ë³´ ì…ë ¥</h1>

    <form id="sajuForm" class="saju-form">
      <!-- ì´ë¦„ -->
      <div class="form-group">
        <input
          type="text"
          id="userName"
          placeholder="ì´ë¦„ (ì˜ˆ: í™ê¸¸ë™)"
          required
        />
      </div>

      <!-- ì„±ë³„ -->
      <div class="form-group">
        <label for="userGender" class="label-bold">ì„±ë³„</label>
        <select id="userGender" required>
          <option value="ì—¬ì„±">ì—¬ì„±</option>
          <option value="ë‚¨ì„±">ë‚¨ì„±</option>
        </select>
      </div>

      <!-- ìƒë…„ì›”ì¼ (ì–‘ë ¥/ìŒë ¥ + ì—°/ì›”/ì¼) -->
      <div class="form-group">
        <label for="birthType" class="label-bold">ìƒë…„ì›”ì¼</label>
        <div class="form-group-inline">
          <!-- ì–‘ë ¥/ìŒë ¥ -->
          <select id="birthType" required>
            <option value="ì–‘ë ¥">ì–‘ë ¥</option>
            <option value="ìŒë ¥">ìŒë ¥</option>
          </select>
          <!-- ì—°/ì›”/ì¼ -->
          <select id="birthYear" required></select>
          <select id="birthMonth" required></select>
          <select id="birthDay" required></select>
        </div>
      </div>

      <!-- íƒœì–´ë‚œ ì‹œê°„ -->
      <div class="form-group">
        <label for="birthHour" class="label-bold">íƒœì–´ë‚œ ì‹œê°„</label>
        <select id="birthHour" required>
          <option value="ëª¨ë¦„">ëª¨ë¦„</option>
          <option value="ìì‹œ">ìì‹œ (23:30 ~ 01:30)</option>
          <option value="ì¶•ì‹œ">ì¶•ì‹œ (01:30 ~ 03:30)</option>
          <option value="ì¸ì‹œ">ì¸ì‹œ (03:30 ~ 05:30)</option>
          <option value="ë¬˜ì‹œ">ë¬˜ì‹œ (05:30 ~ 07:30)</option>
          <option value="ì§„ì‹œ">ì§„ì‹œ (07:30 ~ 09:30)</option>
          <option value="ì‚¬ì‹œ">ì‚¬ì‹œ (09:30 ~ 11:30)</option>
          <option value="ì˜¤ì‹œ">ì˜¤ì‹œ (11:30 ~ 13:30)</option>
          <option value="ë¯¸ì‹œ">ë¯¸ì‹œ (13:30 ~ 15:30)</option>
          <option value="ì‹ ì‹œ">ì‹ ì‹œ (15:30 ~ 17:30)</option>
          <option value="ìœ ì‹œ">ìœ ì‹œ (17:30 ~ 19:30)</option>
          <option value="ìˆ ì‹œ">ìˆ ì‹œ (19:30 ~ 21:30)</option>
          <option value="í•´ì‹œ">í•´ì‹œ (21:30 ~ 23:30)</option>
        </select>
      </div>

      <!-- ì´ë©”ì¼ -->
      <div class="form-group">
        <label for="userEmail" class="label-bold">ì´ë©”ì¼</label>
        <input
          type="email"
          id="userEmail"
          placeholder="ì´ë©”ì¼ (ì˜ˆ: example@email.com)"
          required
        />
      </div>

      <!-- ë²„íŠ¼ ì˜ì—­ -->
      <div class="button-group">
        <button
          type="button"
          class="custom-jelly-button"
          onclick="showPage('paymentPage')"
        >
          ğŸ’° ê²°ì œí•˜ê¸°
        </button>
        <button
          type="button"
          class="custom-jelly-button"
          onclick="showPage('mainPage')"
        >
          â¬…ï¸ ëŒì•„ê°€ê¸°
        </button>
      </div>
    </form>
  </div>

<!-- ê²°ì œ í˜ì´ì§€ -->
<div id="paymentPage" class="page payment-page">
  <h1>ğŸ’³ ê²°ì œ ì§„í–‰</h1>
  <div id="userInfo">
    <!-- ì…ë ¥ ì •ë³´ í™•ì¸ UI -->
  </div>
  
  <!-- í† ìŠ¤ ìœ„ì ¯ UIë¥¼ ë Œë”ë§í•  ì˜ì—­ -->
  <div id="payment-method"></div>
  <div id="agreement"></div>
  

  <button class="custom-jelly-button" onclick="startNaverPay('ì •í†µì‚¬ì£¼', 9900)">
    ğŸ’š ë„¤ì´ë²„í˜ì´ë¡œ ê²°ì œí•˜ê¸° (9,900ì›)
  </button>
  <br>
  <button class="custom-jelly-button" onclick="startTossPay('ì •í†µì‚¬ì£¼', 9900)">
    ğŸ’™ í† ìŠ¤ë¡œ ê²°ì œí•˜ê¸° (9,900ì›)
  </button>
  <br>
  <button class="custom-jelly-button" onclick="showPage('infoPage')">
    â¬…ï¸ ì •ë³´ ìˆ˜ì •
  </button>
</div>

  
<script>

let tossWidgets;  // Toss ìœ„ì ¯ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•  ë³€ìˆ˜


    // ë‚ ì§œ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ ì±„ìš°ê¸°
function populateDateSelectors() {
    const yearSelect = document.getElementById("birthYear");
    const monthSelect = document.getElementById("birthMonth");
    const daySelect = document.getElementById("birthDay");
    const currentYear = new Date().getFullYear();

    // ì—°ë„ ì„ íƒ (1900ë…„ë¶€í„° í˜„ì¬ê¹Œì§€)
    for (let y = 1900; y <= currentYear; y++) {
        const option = document.createElement("option");
        option.value = y;
        option.text = y;
        yearSelect.add(option);
    }

    // ì›” ì„ íƒ
    for (let m = 1; m <= 12; m++) {
        const option = document.createElement("option");
        option.value = m;
        option.text = m;
        monthSelect.add(option);
    }

    // ì¼ ì„ íƒ
    for (let d = 1; d <= 31; d++) {
        const option = document.createElement("option");
        option.value = d;
        option.text = d;
        daySelect.add(option);
    }
}

function showPage(pageId) {
  const pages = document.querySelectorAll('.page');
  pages.forEach(page => page.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');
  
  if (pageId === 'paymentPage') {
    const userName = document.getElementById("userName").value;
    const userGender = document.getElementById("userGender").value;
    const birthType = document.getElementById("birthType").value;
    const birthYear = document.getElementById("birthYear").value;
    const birthMonth = document.getElementById("birthMonth").value;
    const birthDay = document.getElementById("birthDay").value;
    const birthDate = `${birthYear}-${String(birthMonth).padStart(2, '0')}-${String(birthDay).padStart(2, '0')}`;
    const birthHour = document.getElementById("birthHour").value;
    const userEmail = document.getElementById("userEmail").value;
    
    if (!userName || !birthYear || !birthMonth || !birthDay || !birthHour || !userEmail) {
      alert("ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”!");
      showPage('infoPage');
      return;
    }
    
    // ì‚¬ìš©ì ì •ë³´ í™•ì¸ UI ì—…ë°ì´íŠ¸
    document.getElementById("userInfo").innerHTML = `
      <h2>ì…ë ¥ ì •ë³´ í™•ì¸</h2>
      <p><strong>ì´ë¦„:</strong> ${userName}</p>
      <p><strong>ìƒë…„ì›”ì¼:</strong> ${birthDate} (${birthType})</p>
      <p><strong>íƒœì–´ë‚œ ì‹œê°„:</strong> ${birthHour}</p>
      <p><strong>ì´ë©”ì¼:</strong> ${userEmail}</p>
    `;
    
    // ì—¬ê¸°ì„œ sessionStorageì— ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥
    const userData = {
      name: userName,
      gender: userGender,
      birth: birthDate,
      birthType: birthType,
      time: birthHour,
      email: userEmail,
      paymentItem: "ì •í†µì‚¬ì£¼" // ë˜ëŠ” ë™ì ìœ¼ë¡œ ì„¤ì •
    };
    sessionStorage.setItem("userData", JSON.stringify(userData));
    
    // í† ìŠ¤ ìœ„ì ¯ UI ë Œë”ë§ (ê°€ê²© 9900ì›ìœ¼ë¡œ ì„¤ì •)
    renderTossWidgets(9900).catch(err => console.error("í† ìŠ¤ ìœ„ì ¯ ë Œë”ë§ ì˜¤ë¥˜:", err));
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
window.onload = function () {
    populateDateSelectors();
};

// í† ìŠ¤ ìœ„ì ¯ UIë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
async function renderTossWidgets(price) {
  const tossPayments = TossPayments("live_gck_6bJXmgo28e9AaeqYMave8LAnGKWx");
  // ì „ì—­ ë³€ìˆ˜ì— í• ë‹¹í•˜ì—¬ ì¬ì‚¬ìš©
  tossWidgets = tossPayments.widgets({ customerKey: TossPayments.ANONYMOUS });
  
  await tossWidgets.setAmount({
    currency: "KRW",
    value: price,
  });
  
  await Promise.all([
    tossWidgets.renderPaymentMethods({
      selector: "#payment-method",
      variantKey: "DEFAULT",
    }),
    tossWidgets.renderAgreement({
      selector: "#agreement",
      variantKey: "AGREEMENT",
    }),
  ]);
}


function startNaverPay(itemName, price) {
    console.log(`ğŸš€ ê²°ì œ ìš”ì²­: ê²°ì œ í•­ëª© = ${itemName}`);
    const userName = document.getElementById("userName").value;
    const userGender = document.getElementById("userGender").value;
    const birthYear = document.getElementById("birthYear").value;
    const birthMonth = document.getElementById("birthMonth").value;
    const birthDay = document.getElementById("birthDay").value;
    const birthType = document.getElementById("birthType").value;
    const birthHour = document.getElementById("birthHour").value;
    const userEmail = document.getElementById("userEmail").value;

    if (!userName || !userGender || !birthYear || !birthMonth || !birthDay || !birthType || !birthHour || !userEmail) {
        alert("âš ï¸ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”!");
        return;
    }

    const birthDate = `${birthYear}-${String(birthMonth).padStart(2, '0')}-${String(birthDay).padStart(2, '0')}`;
    const paymentItem = itemName;  // ê²°ì œ í•­ëª© ì¶”ê°€

    // âœ… paymentItemì„ successUrlì— í¬í•¨
    const successUrl = `https://test-it.co.kr/saju-success.html?name=${encodeURIComponent(userName)}&gender=${encodeURIComponent(userGender)}&birth=${encodeURIComponent(birthDate)}&birthType=${encodeURIComponent(birthType)}&time=${encodeURIComponent(birthHour)}&email=${encodeURIComponent(userEmail)}&paymentItem=${encodeURIComponent(itemName)}`;


    console.log("ğŸš€ ë„¤ì´ë²„í˜ì´ successUrl:", successUrl);

    const oPay = Naver.Pay.create({
        mode: "development",  
        clientId: "HN3GGCMDdTgGUfl0kFCo", 
        chainId: "a3lzdzZ0QmtxSG1"
    });

    oPay.open({
        merchantPayKey: "order_" + new Date().getTime(),
        productName: `í…ŒìŠ¤íŠ¸ì‡ ì •í†µì‚¬ì£¼`,
        productCount: "1",
        totalPayAmount: price,
        taxScopeAmount: price,
        returnUrl: successUrl  // âœ… ìˆ˜ì •ëœ successUrl ì „ë‹¬
    });

    alert(`ğŸ’š ë„¤ì´ë²„í˜ì´ë¡œ ${paymentItem} ê²°ì œê°€ ì§„í–‰ë©ë‹ˆë‹¤!`);
}


async function startTossPay(itemName, price) {
  console.log(`ğŸš€ í† ìŠ¤ ê²°ì œ ìš”ì²­: ê²°ì œ í•­ëª© = ${itemName}`);

  const userName = document.getElementById("userName").value;
  const userEmail = document.getElementById("userEmail").value;

  if (!userName || !userEmail) {
    alert("âš ï¸ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”!");
    return;
  }

  // tossWidgetsê°€ ë Œë”ë§ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ ì²˜ë¦¬
  if (!tossWidgets) {
    alert("ê²°ì œ ìœ„ì ¯ì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê²°ì œ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.");
    return;
  }

  try {
    const response = await tossWidgets.requestPayment({
      orderId: `order_${Date.now()}`,
      orderName: itemName,
      successUrl: "https://test-it.co.kr/saju-success.html",
      failUrl: "https://test-it.co.kr/payment-fail1",
      customerName: userName,
      customerEmail: userEmail,
    });
    console.log("âœ… ê²°ì œ ì„±ê³µ:", response);
  } catch (error) {
    console.error("âŒ ê²°ì œ ì‹¤íŒ¨:", error);
    alert(`âŒ ê²°ì œ ì‹¤íŒ¨: ${error.message}`);
  }
}


// ê²°ì œ ì „ ì‚¬ìš©ì ì •ë³´ ì €ì¥ (ì˜ˆì‹œ)
const userData = {
  name: document.getElementById("userName").value,
  gender: document.getElementById("userGender").value,
  birth: `${document.getElementById("birthYear").value}-${String(document.getElementById("birthMonth").value).padStart(2, '0')}-${String(document.getElementById("birthDay").value).padStart(2, '0')}`,
  birthType: document.getElementById("birthType").value,
  time: document.getElementById("birthHour").value,
  email: document.getElementById("userEmail").value,
  paymentItem: "ì •í†µì‚¬ì£¼" // ë˜ëŠ” ë™ì ìœ¼ë¡œ ì„¤ì •
};
sessionStorage.setItem("userData", JSON.stringify(userData));


    
function sendToGoogleSheet(userName, userGender, birthDate, birthType, birthTime, userEmail, paymentItem) {
    console.log("ğŸ“¤ ì „ì†¡í•  ë°ì´í„°:", userName, userGender, birthDate, birthType, birthTime, userEmail, paymentItem);


    fetch("https://script.google.com/macros/s/AKfycbzSWc97F6-n1z0h6y0i2lhK7PJBkH31NNC6wkgygIa7mzYlifA5nbxqS1DcOcCUQ0vF/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            userName: userName,
            userGender: userGender,
            birthDate: birthDate,
            birthType: birthType,
            birthTime: birthTime,
            userEmail: userEmail,
            paymentItem: paymentItem,  // âœ… ì—¬ê¸°ì„œë„ ì¶”ê°€!
            paymentTime: new Date().toLocaleString()
        })
    })
    .then(() => {
        console.log("âœ… êµ¬ê¸€ ì‹œíŠ¸ì— ë°ì´í„° ì „ì†¡ ì™„ë£Œ!");
    })
    .catch(error => {
        console.error("âŒ ë°ì´í„° ì „ì†¡ ì‹¤íŒ¨:", error);
    });
}

// âœ… í˜ì´ì§€ ë¡œë”© ì‹œ ì‹¤í–‰
window.onload = function () {
    // ë‚ ì§œ ì…€ë ‰í„° ì´ˆê¸°í™”
    populateDateSelectors();

    // ê²°ì œ ì„±ê³µ í›„ URL íŒŒë¼ë¯¸í„° í™•ì¸
    const urlParams = new URLSearchParams(window.location.search);
    const userName = urlParams.get("name");
    const userGender = urlParams.get("gender");
    const birthDate = urlParams.get("birth");
    const birthType = urlParams.get("birthType");
    const birthTime = urlParams.get("time");
    const userEmail = urlParams.get("email");
    const paymentItem = urlParams.get("paymentItem");

    // âœ… ëª¨ë“  í•„ìˆ˜ ì •ë³´ê°€ ìˆì„ ë•Œë§Œ ì²˜ë¦¬
    if (userName && userGender && birthDate && birthType && birthTime && userEmail && paymentItem) {
        console.log("âœ… ê²°ì œ ì„±ê³µ! ì •ë³´ê°€ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        console.log(`ì´ë¦„: ${userName}, ì„±ë³„: ${userGender}, ìƒë…„ì›”ì¼: ${birthDate}, ì´ë©”ì¼: ${userEmail}, ê²°ì œí•­ëª©: ${paymentItem}`);

        // êµ¬ê¸€ ì‹œíŠ¸ë¡œ ë°ì´í„° ì „ì†¡
        sendToGoogleSheet(userName, userGender, birthDate, birthType, birthTime, userEmail, paymentItem);

        // ì„±ê³µ ì•Œë¦¼
        alert(`âœ… ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nì´ë¦„: ${userName}\nì„±ë³„: ${userGender}\nì´ë©”ì¼: ${userEmail}\nê²°ì œ í•­ëª©: ${paymentItem}`);
    } else {
        console.log("âŒ ê²°ì œ ì„±ê³µ ì •ë³´ê°€ ì—†ìœ¼ë¯€ë¡œ ì•„ë¬´ ì‘ì—…ë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    }
};

console.log("ğŸš€ TossPayments í‚¤:", tossPayments);
console.log("ğŸš€ í˜„ì¬ í™˜ê²½:", window.location.hostname);

  </script>
</body>
</html>