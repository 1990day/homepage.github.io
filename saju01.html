

<!DOCTYPE html>
<html lang="ko">
<head>

     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5522499110435321"
     crossorigin="anonymous"></script>
     <meta http-equiv="Content-Security-Policy" content="
     default-src 'self' https://*;
     script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*;
     style-src 'self' 'unsafe-inline' https://*;
     img-src 'self' data: https://*;
     connect-src 'self' https://*;
     frame-src 'self' https://*;
     ">
     <script src="https://nsp.pay.naver.com/sdk/js/naverpay.min.js"></script>




    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>테스트잇 나의 전체 사주</title>
    <meta name="description" content="테스트잇 나의 전체 사주">
<meta name="keywords" content="테스트잇,전체사주,전통사주,테스트잇사주,테스트잇전체사주,테스트잇사주,정확한사주,연애테스트,연애mbti,연애성격테스트, 심리테스트, mbti테스트">
    <meta property="og:type" content="website"> 
    <meta property="og:title" content="테스트잇 나의 전체 사주">
    <meta property="og:description" content="테스트잇 나의 전체 사주">
    <meta property="og:image" content="saju_main01.png">
    <meta property="og:url" content="https://test-it.co.kr/saju01">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
      <link rel="icon" type="image/png" href="favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">



<style>

/* start 태그와 question 태그 모두 article 태그라서 article 태그에 속성을 주면 동시에 적용됨
.start{
    display: flex;
    flex-direction: column;
}
*/
    
   @font-face {
    font-family: 'ChosunGu';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@1.0/ChosunGu.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}
    
      body {
            font-family: 'ChosunGu', sans-serif;
        }
    
.logo {
    width: 100px;
    margin-top: 14px;
}

.main-nav {
    display: flex;
    font-size: 1.25rem;
    text-transform: uppercase;
    margin-top: 34px;
    list-style: none;
}

.main-nav li {
    margin-left: 36px;
       font-family: 'Do Hyeon', sans-serif;
    line-height: 1.7;
    color: #432;
}

.main-nav a{
    color: #432;
       font-family: 'Do Hyeon', sans-serif;
    line-height: 1.7;
}

.main-nav a:hover {
    color: #0bd;
}


.page-header {
    display: flex;
    justify-content: space-between;
}

    
article{
    display: flex;
    flex-direction: column;
}

 
    
.question{
    display: none;
}

.result{
    display: none;
}
.progress-bar {
    background-color: #76c5c1;
}
.progress {
    background-color: #fbffe4;
}
#img{
    width: 500px;
    height: 900px;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

#img_main{
    width: 500px;
    height: 600px;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

#question-image {
    max-width: 100%;
    height: auto;
    margin: 0 auto;
    display: block;
}

.question-image {
    max-width: 100%;
    height: auto;
    margin: 0 auto;
    display: block;
}
.custom-jelly-button {
    width: 100%;
    max-width: 350px;
    height: 60px;
    font-size: 15px !important;
    font-weight: bold;
    color: black !important;
    background: linear-gradient(145deg, #ffcfcf, #ffcfcf); /* 분홍과 노랑 그라데이션 */
    border: none;
    border-radius: 17px;
    box-shadow: inset -4px -4px 10px rgba(255, 255, 255, 0.7), 
                inset 4px 4px 10px rgba(0, 0, 0, 0.1),
                2px 2px 8px rgba(0, 0, 0, 0.15);
    margin: 0 auto;
    display: block;
}

.custom-jelly-button:hover {
    background: linear-gradient(145deg, #ffcfcf, #ffcfcf); /* 반대로 그라데이션 */
}


.page {
            display: none;
            margin: 0 auto;
            max-width: 600px;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .active {
            display: block;
        }
        input, button {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 10px;
            border: 1px solid #ddd;
        }

        
    
.jelly-question-box {
    width: 100%;
    max-width: 400px;
    min-height: 150px;
    padding: 30px 20px;
    margin: 20px auto;
    background: linear-gradient(145deg, #ffc1cc, #ff91a1); /* 진한 분홍색으로 변경 */
    border-radius: 25px;
    box-shadow: inset -6px -6px 12px rgba(255, 255, 255, 0.8), 
                inset 6px 6px 12px rgba(0, 0, 0, 0.1);
    text-align: center;
    color: #432;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* h6 요소의 폰트 크기 강제 적용 */
.jelly-question-box h6 {
    font-size: 18px !important;
}
    
.btn-info.focus, .btn-info:focus {
    box-shadow: 0 0 0 0.1rem rgb(255 255 255);
}
    .btn-info:hover {
    color: #ffffff;
    background-color: #ffffff;
    border-color: #ffffff;
            box-shadow: 0 0 0 0.1rem rgb(255 255 255);
}
    .btn-info.focus, .btn-info:focus {
    color: #ffffff;
    background-color: #ffffff;
    border-color: #ffffff;
    box-shadow: 0 0 0 0.1rem rgb(255 255 255);
}
    .btn-info {
    color: #ffffff;
    background-color: #ffffff;
    border-color: #ffffff;
            box-shadow: 0 0 0 0.1rem rgb(255 255 255);
}
    .btn.focus, .btn:focus {
    outline: 0;
    box-shadow: 0 0 0 0.1rem rgb(255 255 255);
}
   
    
    
    .at-share-btn-elements{
        text-align: center;
    }
.share{
    margin: 0 auto;
}

.kakao_ad{
    width: 320px;
    margin: 0 auto;
}

.kakao_ad2{
    width: 320px;
    margin: 0 auto;
}
.coupang_ad {
    width: 320px;
    margin: 0 auto;
}
        .custom-button {
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
        }
    

  
</style>





</head>
<!-- body 태그 style background-color 지정으로 배경색 변경-->
<body class="container" style="background-color:#ffffff">
            
    <header class="page-header wrapper">
        <h1><a href="index.html"><img class="logo" src="img_logo.png" alt="test it"></a>
        </h1>
    <nav>
        <u1 class="main-nav">
            <li> <a href="https://test-it.co.kr/test.html">성격</a></li>
            <li> <a href="https://test-it.co.kr/face.html">얼굴</a></li>
            <li> <a href="https://test-it.co.kr/etc.html">그외</a></li>
            <li> <a href="https://test-it.co.kr/saju.html">사주</a></li>
        </u1>
    </nav>
        
        
    </header>

<!-- 1. 사주 메인 페이지 -->
<div id="mainPage" class="page active">

    <img src="saju_main01.png" alt="사주 예시" style="width: 100%; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
    <br><br>
    <button class="custom-jelly-button" onclick="showPage('infoPage')">💌 정보 입력하고 결제하기</button>
</div>

<!-- 2. 정보 입력 페이지 -->
<div id="infoPage" class="page">
    <h1>📄 사주 정보 입력</h1>
    <form id="sajuForm">
        <input type="text" id="userName" placeholder="이름 (예: 홍길동)" required><br>
        <input type="date" id="birthDate" required><br>
        <input type="time" id="birthTime" required><br>
        <input type="email" id="userEmail" placeholder="이메일 (예: example@email.com)" required><br>
        <button type="button" class="custom-jelly-button" onclick="showPage('paymentPage')">💰 결제하기</button>
        <br><button type="button" class="custom-jelly-button" onclick="showPage('mainPage')">⬅️ 돌아가기</button>
    </form>
</div>

<!-- 3. 결제 페이지 -->
<div id="paymentPage" class="page">
    <h1>💳 결제 진행</h1>
    <div id="userInfo"></div>
    <button class="custom-jelly-button" onclick="startKakaoPay('정통사주', 9900)">💛 카카오페이로 결제하기 (9,900원)</button><br>
    <button class="custom-jelly-button" onclick="startNaverPay('정통사주', 9900)">💚 네이버페이로 결제하기 (9,900원)</button>
    <br><br>
    <button class="custom-jelly-button" onclick="showPage('infoPage')">⬅️ 정보 수정</button>
</div>

<script>
// 페이지 이동 함수
function showPage(pageId) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');

    // 결제 페이지일 때 정보 표시
    if (pageId === 'paymentPage') {
        const userName = document.getElementById("userName").value;
        const birthDate = document.getElementById("birthDate").value;
        const birthTime = document.getElementById("birthTime").value;
        const userEmail = document.getElementById("userEmail").value;

        if (!userName || !birthDate || !birthTime || !userEmail) {
            alert("모든 정보를 입력해 주세요!");
            showPage('infoPage');
            return;
        }

        // 정보 표시
        document.getElementById("userInfo").innerHTML = `
            <h2>입력 정보 확인</h2>
            <p><strong>이름:</strong> ${userName}</p>
            <p><strong>생년월일:</strong> ${birthDate}</p>
            <p><strong>태어난 시간:</strong> ${birthTime}</p>
            <p><strong>이메일:</strong> ${userEmail}</p>
        `;
    }
}

// 카카오페이 결제 함수
function startKakaoPay(itemName, price) {
    const userName = document.getElementById("userName").value;
    const birthDate = document.getElementById("birthDate").value;
    const birthTime = document.getElementById("birthTime").value;
    const userEmail = document.getElementById("userEmail").value;

    if (!userName || !birthDate || !birthTime || !userEmail) {
        alert("모든 정보를 입력해 주세요!");
        return;
    }

    // 결제 요청
    fetch("https://kapi.kakao.com/v1/payment/ready", {
        method: "POST",
        headers: {
            "Authorization": "KakaoAK 676853c331538ac66410812cf82d6d1a",
            "Content-Type": "application/x-www-form-urlencoded"
        },
        body: new URLSearchParams({
            cid: "TC0ONETIME",
            partner_order_id: "order_" + new Date().getTime(),
            partner_user_id: userEmail,
            item_name: `${itemName} (${userName})`,
            quantity: 1,
            total_amount: price,
            tax_free_amount: 0,
            approval_url: `https://test-it.co.kr/saju-success.html?name=${userName}&birth=${birthDate}&time=${birthTime}&email=${userEmail}`,
            fail_url: "https://test-it.co.kr/payment-fail",
            cancel_url: "https://test-it.co.kr/payment-cancel"
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.next_redirect_pc_url) {
            // 결제 성공 시 정보 저장
            alert("결제가 완료되면 정보가 전송됩니다!");
            window.location.href = data.next_redirect_pc_url;
        } else {
            alert("결제 요청 실패: " + data.code);
        }
    })
    .catch(error => console.error("Error:", error));
}
window.onload = function () {
    const urlParams = new URLSearchParams(window.location.search);
    const userName = urlParams.get("name");
    const birthDate = urlParams.get("birth");
    const birthTime = urlParams.get("time");
    const userEmail = urlParams.get("email");

    if (userName && birthDate && birthTime && userEmail) {
        saveToGoogleSheet(userName, birthDate, birthTime, userEmail);
        alert(`결제가 완료되었습니다!\n이름: ${userName}\n이메일: ${userEmail}`);
    }
};



function startNaverPay(itemName, price) {
    const userName = document.getElementById("userName").value;
    const birthDate = document.getElementById("birthDate").value;
    const birthTime = document.getElementById("birthTime").value;
    const userEmail = document.getElementById("userEmail").value;

    if (!userName || !birthDate || !birthTime || !userEmail) {
        alert("모든 정보를 입력해 주세요!");
        return;
    }

    const oPay = Naver.Pay.create({
        mode: "development",
        clientId: "HN3GGCMDdTgGUfl0kFCo",
        chainId: "a3lzdzZ0QmtxSG1"
    });

    oPay.open({
        merchantPayKey: "order_" + new Date().getTime(),
        productName: `${itemName} (${userName})`,
        productCount: "1",
        totalPayAmount: price,
        taxScopeAmount: price,
        returnUrl: `https://test-it.co.kr/saju-success.html?name=${userName}&birth=${birthDate}&time=${birthTime}&email=${userEmail}`,

    });

    alert(`결제가 진행됩니다!`);
}



// 구글 스프레드시트에 정보 저장
// 구글 스프레드시트에 정보 저장
function saveToGoogleSheet(name, birth, time, email) {
    const formData = new FormData();
    formData.append("userName", name);
    formData.append("birthDate", birth);
    formData.append("birthTime", time);
    formData.append("userEmail", email);

    // 웹 앱 URL 연결 (여기 중요!)
    fetch("https://script.google.com/macros/s/AKfycbxoadFDZ2n_z_Ifs-JQfNcwVeEISrc-UHltqA4osYRpKls8pUvyMagSV69xq2Up2Hes/exec", {
        method: "POST",
        mode: "no-cors",  // 이 부분만 추가!
        body: formData
    })
    .then(response => {
        if (response.ok) {
            console.log("정보가 성공적으로 저장되었습니다.");
        } else {
            console.error("정보 저장 실패.");
        }
    })
    .catch(error => console.error("Error:", error));
}

</script>

</body>
</html>